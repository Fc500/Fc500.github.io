<html>
  <head>
    <title>Global Warming Simulator</title>
    <link href='https://fonts.googleapis.com/css?family=Gowun Dodum' rel='stylesheet'>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <style>
      .section {
        background-color: #878787;
        color: white;
        margin: 0.65%;
        float: left;
        text-align: center; 
        width: 32%; 
        height: 90%;
      }
      
      .storeButton {
        background-color: #616161;
        width: 90%;
        height: 100px;
        color: white;
        text-align: left;
        font-size: 15px;
        font-weight: bold;
        margin: 5px;
        border-width: 5px;
	line-height: 0.4;
	text-align: right;
      }
      
      .emboss-effect {
      box-shadow: 0 1px 2px rgba(0,0,0,0.07), 
                0 2px 4px rgba(0,0,0,0.07), 
                0 4px 8px rgba(0,0,0,0.07), 
                0 8px 16px rgba(0,0,0,0.07),
                0 16px 32px rgba(0,0,0,0.07), 
                0 32px 64px rgba(0,0,0,0.07);
      }
      
      .storeScroll {
        overflow-x: hidden;
        overflow-y: auto;
      }
      
      .storeScrollHoriz {
        overflow: auto;
	text-align:justify;
        white-space: nowrap;
        background-color: #bdbdbd;
        margin: 5px;
      }
      
      body {
        font-family: 'Gowun Dodum';font-size: 22px;
        background-color: black;
      }
      
      .gowun {
        font-family: 'Gowun Dodum';
      }
      
    /* The switch - the box around the slider */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

      
      /*.upgrade {
        font-size: 15px;
        color: white;
        background-color: #828282;
        box-shadow: 0px 0px 10px 5px rgba(255, 226, 99, 0.5);
        border-size: 5px;
        border-color: gold;
        border-style: solid;
        width: 75px;
        height: 75px;
        text-align: center;
        margin: 2px;
	float: left;
	padding-top: 1px;
      }*/
	    
      .imgButton {
        position: relative;
        display: block;
        float: left;
      
     }

    </style>
  </head>
  <body>
    <div class="section">
      <h3>STATISTICS</h3>
      <p><span id="moneyDisp">0</span></p>
      <p>Dollars</p>
    </div>   
	  
	  
    <div class="section">
      <h3>RESEARCH</h3> <!-- UNUSED CODE FOR THE BUILDINGS: KEEP FOR REFERENCE
      <div class="storeScrollHoriz">
        <p>Windmills</p>
        <div id="x" style="margin-top: 40px;"></div>
      </div>
      <div class="storeScrollHoriz">
        <p>Solar Panel</p>
        <div id="y" style="margin-top: 40px;"></div>
      </div> -->
	
	    <p><span id="greenDisp">0</span></p>
	    <p>Green Points</p>

    </div>   
	  
	  
	  
    <div class="section storeScroll">
      <h3>STORE</h3>
	
	  <br>
	  <p id="state">BUYING</p>
          <label class="switch" onclick="checkState()">
          <input type="checkbox" id="slider">
          <span class="slider"></span>
        </label>
        <div style="background-color: #4a4a4a;">
          <button class="storeButton emboss-effect" onclick="buyBuildings(windmills, 'owned', 'price', 0)">
          <img src="WindmillSpread.png" width=20 alt="windmill" class="imgButton"/>
	   
              <p>Windmill</p>
              <h6>1.32 million</h6>
              <h5 id="windmillOwned">0</h5>
          </button><br>
          <button class="storeButton emboss-effect" onclick="buyBuildings(solarpanels, 'solarpanelOwned', 'solarpanelPrice', 1)">
            <img src="solarPanelSpread.png" width=40 alt="windmill" class="imgButton"/>
            <p>Solar Panel</p>
            <h6>1.2 million</p>
            <h5 id="solarpanelOwned">0</h5>
          </button><br>
        </div>
      </div>
    <script>
      
      // Stats
      let moneyDisplay = document.getElementById("moneyDisp");
      let greenDisplay = document.getElementById("greenDisp");
      let globalTempature = 60;
      let money = 10000000;
      let buySellToggle = true;
      let greenPoints = 0;
      
      // Buildings
      
      let windmills = {
        price: 120000,
        production: 1000000,
        owned: 0,
      };
      
      let solarpanels = {
        solarpanelPrice: 1000000,
        solarpanelProduction: 10,
        solarpanelOwned: 0,
      };
      
      // Building production
      
      let pos = 20;
      let imgRel = "";
      
      
      window.onload = function loading() { 
        window.alert('v0.17.2');
        document.getElementById("moneyDisp").innerHTML = money;
	document.getElementById("greenDisp").innerHTML = money;
      }
      
      
      // Building functions
      
       function numFormatter(num) {
         if(num > 999 && num < 1000000){
            return (num/1000).toFixed(1) + 'K'; // convert to K for number from > 1000 < 1 million 
         } else if(num > 1000000 && num < 1000000000){
            return (num/1000000).toFixed(1) + 'M'; // convert to M for number from > 1 million 
         } else if(num > 999999999){
            return (num/1000000000).toFixed(1) + 'B'; // convert to M for number from > 1 million 
         } else if(num < 900){
            return num; // if value < 1000, nothing to do
         }
       }
      
      function calculateBuildings() {
        
        if (windmills.windmillOwned >= 0) {
        money += windmills.windmillOwned * windmills.windmillProduction;
        }
        
        if (solarpanels.solarpanelOwned >= 0) {
        money += solarpanels.solarpanelOwned * solarpanels.solarpanelProduction;
        }
        
        moneyDisplay.innerHTML = numFormatter(money);
      }
      
      function buyBuildings(building, buildingOwned, buildingPrice, image) {
        if (money >= building[buildingPrice] && buySellToggle == true) { // Main buying function
          building[buildingOwned]++;
          money -= building[buildingPrice];
          document.getElementById(buildingOwned).innerHTML = building[buildingOwned];
          moneyDisplay.innerHTML = money;
          window.alert("bought");
          buySellToggle == false;
          window.alert(buySellToggle);
          dispImage(false, image);
          
        } else if (money < building[buildingPrice] && buySellToggle == true) { // Not enough money function
          window.alert("Not enough money!");
          
        } else if (buySellToggle == false && building[buildingOwned] > 0) { // Selling building function
          money += building[buildingPrice];
          building[buildingOwned] -= 1;
          window.alert("Building sold!");
          document.getElementById(buildingOwned).innerHTML = building[buildingOwned];
          
        } else if (buySellToggle == false && building[buildingOwned] == 0) { // Not enough buildings to sell function
          window.alert("Not enough buildings to sell!"); 
        }
         
      }
      
    
      
    
        
      function dispImage(destory, imageSelection) {
        
        let img = document.createElement("img");
        //let imageSelection = document.getElementById("images").value;
        let div = 0;  
        if (imageSelection == 0) {
          img.src = 'WindmillSpread.png';        
          div = document.getElementById("x");
        } else if (imageSelection == 1) {
          img.src = "solarPanelSpread.png";
          div = document.getElementById("y");
        }  
          if (destory == false) {
            imgRel = pos + "px";
            img.setAttribute("width", "50px");
            img.setAttribute("position", "absolute");
            img.setAttribute("left", "10px");
            pos += 20;
            div.appendChild(img);
          } else if (destroy == true) {
            div.removeChild(img);
          }
        
        
      } 
      
      
      function checkState() {
        let slider = document.getElementById("slider");
        window.alert(slider.checked);
        if (slider.checked == true) {
        buySellToggle = false;
        document.getElementById("state").innerHTML = "SELLING";
        } else if (slider.checked == false) {
        buySellToggle = true;
        document.getElementById("state").innerHTML = "BUYING";
        }

      }

  
      // Timers
     setInterval(calculateBuildings, 1000);
    </script>
  </body>
</html>
