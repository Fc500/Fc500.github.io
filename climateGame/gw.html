<html>
  <head>
    <title>Global Warming Simulator</title>
    <link href='https://fonts.googleapis.com/css?family=Gowun Dodum' rel='stylesheet'>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <style>
      .section {
        background-color: #878787;
        color: white;
        margin: 0.65%;
        float: left;
        text-align: center; 
        width: 32%; 
        height: 90%;
      }
      
      .storeButton {
        background-color: #616161;
        width: 90%;
        height: 100px;
        color: white;
        font-size: 15px;
        font-weight: bold;
        margin: 5px;
        border-width: 5px;
	line-height: 0.4;
	text-align: right;
      }
	    
        .upgradeButton {
        background-color: #616161;
	text-align: center;
        width: 100px;
        height: 100px;
        color: white;
        font-size: 15px;
        font-weight: bold;
        margin: 5px;
        border-width: 5px;
	line-height: 0.4;
	display: block;
      }
      
      .emboss-effect {
      box-shadow: 0 1px 2px rgba(0,0,0,0.07), 
                0 2px 4px rgba(0,0,0,0.07), 
                0 4px 8px rgba(0,0,0,0.07), 
                0 8px 16px rgba(0,0,0,0.07),
                0 16px 32px rgba(0,0,0,0.07), 
                0 32px 64px rgba(0,0,0,0.07);
      }
      
      .storeScroll {
        overflow-x: hidden;
        overflow-y: auto;
      }
      
      .storeScrollHoriz {
        overflow: auto;
	text-align:justify;
        white-space: nowrap;
        background-color: #bdbdbd;
        margin: 5px;
      }
      
      body {
        font-family: 'Gowun Dodum';font-size: 22px;
        background-color: black;
      }
      
      .gowun {
        font-family: 'Gowun Dodum';
      }
      
    /* The switch - the box around the slider */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}
	    
      .imgButton {
        position: relative;
        display: block;
        float: left;
      
     }
	    
	    
	    .blur {
	    filter: blur(6px);
  -webkit-filter: blur(6px);
	    }

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
	
/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 3px solid #888;
  width: 80%;
  border-radius: 25px;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

    </style>
  </head>
  <body>
    <div class="section storeScroll">
      <h3>STATISTICS</h3>
      <p><span id="moneyDisp">0</span></p>
      <p>Dollars</p>
      <br>
      <p><span id="tempDisp">0</span>F</p>
      <p>Global Tempature</p>
      <br>
      <p><span id="yearDisp">0</span></p>
      <p>Year</p>
    </div>   
	  
	  
    <div class="section storeScroll">
      <h3>RESEARCH</h3> <!-- UNUSED CODE FOR THE BUILDINGS: KEEP FOR REFERENCE
      <div class="storeScrollHoriz">
        <p>Windmills</p>
        <div id="x" style="margin-top: 40px;"></div>
      </div>
      <div class="storeScrollHoriz">
        <p>Solar Panel</p>
        <div id="y" style="margin-top: 40px;"></div>
      </div> -->
	
	    <p><span id="greenDisp">0</span></p>
	    <p>Green Points</p>
	    
	    <button class="storeButton emboss-effect" onclick="buyUpgrades(researcher, 'reseOwned', 'price')">
		    <p>Researcher</p>
		    <h6>2.8 Million</h6>
		    <h5 id="reseOwned">0</h5>
	    </button>
	    
	    <button class="storeButton emboss-effect blur" onclick="buyUpgrades(station, 'stationOwned', 'price')">
		    <p>Research Station</p>
		    <h6>800 Million</h6>
		    <h5 id="stationOwned">0</h5>
	    </button>
	    <h4>Powerups</h4>
	    <button class="upgrades" onclick="setWindmillsTrue()">
	      <p>Windmills</p>
	    </button>

    </div>   
	  
	  
	  
    <div class="section storeScroll">
      <h3>STORE</h3>
	
	  <br>
	  <div style="margin: 5px; text-align: left;">
	    <p id="state">BUYING: </p>
            <label class="switch" onclick="checkState()">
            <input type="checkbox" id="slider">
            <span class="slider"></span>
	  </div>
        </label>
        <div style="background-color: #4a4a4a; width: 96%; margin: auto;">
		
		
	  <button class="storeButton emboss-effect" onclick="buyBuildings(solarpanels, 'solarOwned', 'price', 1), flavorText(0);" id="solarpanels">
            <img src="solarPanelSpread.png" width=40 alt="windmill" class="imgButton"/>
            <p>Solar Panel</p>
            <h6>100K</p>
            <h5 id="solarOwned">0</h5>
          </button><br>
		
          <button class="storeButton emboss-effect" onclick="buyBuildings(windmills, 'windOwned', 'price', 0)" id="windmills" style="display: none;">
          <img src="WindmillSpread.png" width=20 alt="windmill" class="imgButton"/>
	   
              <p>Windmill</p>
              <h6>1.32 million</h6>
              <h5 id="windOwned">0</h5>
          </button><br>
        </div>
      </div>
	  
	  
	  <!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p id="flavorText">Some text in the Modal..</p>
  </div>

</div>
    <script>
	    
      // Modal
      var modal = document.getElementById("myModal");
      var span = document.getElementsByClassName("close")[0];
	    
      span.onclick = function() {
  	modal.style.display = "none";
      }
	    
      window.onclick = function(event) {
  	if (event.target == modal) {
          modal.style.display = "none";
 	}
      }
	    
      
      // Stats
      let moneyDisplay = document.getElementById("moneyDisp");
      let greenDisplay = document.getElementById("greenDisp");
      let tempDisplay = document.getElementById("tempDisp");
      let yearDisplay = document.getElementById("yearDisp");
      let upgrades = document.getElementsByClassName("upgrades");
      let globalTempature = 67.7;
      let money = 10000000;
      let buySellToggle = true;
      let greenPoints = 0;
      let rateOfChange = 0.013;
      let currentYear = 2021;
      
	    
      // Boxes
      
      let windmillBox = document.getElementById("windmills");
      /*e
      e
      e
      e
      e*/
      // Buildings
      let solarpanels = {
        price: 100000,
        production: 500000,
        solarOwned: 0,
	researched: true,
      };
	    
      let windmills = {
        price: 1200000,
        production: 1000000,
        windOwned: 0,
	researched: false,
      };
      
	    

      // Upgrades
	    
      let researcher = {
      	price: 2800000,
	reseOwned: 0,
	production: 0.1,
      }
      
      // Building production
      
      let pos = 20;
      let imgRel = "";
      
      
      window.onload = function loading() { 
        window.alert('v0.19.3');
	checkState();
	upgrades[0].style.display = "none";
	tempDisplay.innerHTML = globalTempature;
	yearDisplay.innerHTML = currentYear;
      }
      
      function setWindmillsTrue() {
        windmills.researched = true;
	window.alert(windmills.researched);
      }
      // Building functions
      
       function numFormatter(num) {
         if(num > 999 && num < 1000000){
            return (num/1000).toFixed(1) + 'K'; // convert to K for number from > 1000 < 1 million 
         } else if(num > 1000000 && num < 1000000000){
            return (num/1000000).toFixed(1) + 'M'; // convert to M for number from > 1 million 
         } else if(num > 999999999){
            return (num/1000000000).toFixed(1) + 'B'; // convert to M for number from > 1 billion 
         } else if(num < 900){
            return num; // if value < 1000, nothing to do
         }
       }
      
      function calculateBuildings() {
        
        if (windmills.windOwned >= 0) {
        money += windmills.windOwned * windmills.production;
        }
        
        if (solarpanels.solarOwned >= 0) {
        money += solarpanels.solarOwned * solarpanels.production;
        }
        
	if (researcher.reseOwned >= 0) {
	  greenPoints += researcher.reseOwned * researcher.production;
	}
        moneyDisplay.innerHTML = numFormatter(money);
	greenDisplay.innerHTML = greenPoints.toFixed(2);
	     
      }
      
      function buyBuildings(building, buildingOwned, buildingPrice, image) {
        if (money >= building[buildingPrice] && buySellToggle == true && building["researched"] == true) { // Main buying function
          building[buildingOwned]++;
          money -= building[buildingPrice];
          document.getElementById(buildingOwned).innerHTML = building[buildingOwned];
          moneyDisplay.innerHTML = numFormatter(money);
          buySellToggle == false;
          dispImage(false, image);
          
        } else if (money < building[buildingPrice] && buySellToggle == true) { // Not enough money function
          window.alert("Not enough money!");
          
        } else if (buySellToggle == false && building[buildingOwned] > 0) { // Selling building function
          money += building[buildingPrice];
          building[buildingOwned] -= 1;
          window.alert("Building sold!");
          document.getElementById(buildingOwned).innerHTML = building[buildingOwned];
          
        } else if (buySellToggle == false && building[buildingOwned] == 0) { // Not enough buildings to sell function
          window.alert("Not enough buildings to sell!"); 
        }
      }
	    
	function checkUpgrades() {
	
        currentYear += 1;
	yearDisplay.innerHTML = currentYear;
       if (greenPoints > 5) {
         upgrades[0].classList.add("upgradeButton");
	 upgrades[0].style.display = "block";
       }
		
     }    
	function raiseTempature() {
          globalTempature += rateOfChange;
	  tempDisplay.innerHTML = globalTempature.toFixed(2);
        }    
	    
	function raiseTempHigh() {
	  rateOfChange *= 2;
          return rateOfChange;
	}
	    
	    
	    
	    
function checkBuildings() {
  if (windmills.price * 1.5 < money) {
    windmillBox.style.display = "block"; 
    windmillBox.classList.add("blur");
  }
  
  if (windmills.price * 1.5 < money && windmills.researched == true) {
    windmillBox.classList.remove("blur");
    window.alert("true!");
  }
}    
	    
	function buyUpgrades(object, owned, price) {
	
	  if (object[price] < money) {
	    money -= object[price];
	    object[owned]++;
            document.getElementById(owned).innerHTML = object[owned];
            moneyDisplay.innerHTML = numFormatter(money);
	  }
	}
      
    
      
    
        
      function dispImage(destory, imageSelection) {
        
        let img = document.createElement("img");
        //let imageSelection = document.getElementById("images").value;
        let div = 0;  
        if (imageSelection == 0) {
          img.src = 'WindmillSpread.png';        
          div = document.getElementById("x");
        } else if (imageSelection == 1) {
          img.src = "solarPanelSpread.png";
          div = document.getElementById("y");
        }  
          if (destory == false) {
            imgRel = pos + "px";
            img.setAttribute("width", "50px");
            img.setAttribute("position", "absolute");
            img.setAttribute("left", "10px");
            pos += 20;
            div.appendChild(img);
          } else if (destroy == true) {
            div.removeChild(img);
          }
        
        
      } 
      
      
      function checkState() {
        let slider = document.getElementById("slider");
        window.alert(slider.checked);
        if (slider.checked == true) {
        buySellToggle = false;
        document.getElementById("state").innerHTML = "SELLING";
        } else if (slider.checked == false) {
        buySellToggle = true;
        document.getElementById("state").innerHTML = "BUYING";
        }

      }
	    

	    // Flavor Text
	    function flavorText(button) {
	      let flavor = document.getElementById("flavorText");
	      if (button == 0) {
	        flavor.innerHTML = "Works best on Neptune";
	      } else if (button == 1) {
	        flavor.innerHTML = "Good for tans!";
	      }
	      modal.style.display = "block";
	    }
	    
	    
  
      // Timers
     setInterval(calculateBuildings, 1000);
     setInterval(checkBuildings, 1000);
     setInterval(checkUpgrades, 1000);
     setInterval(raiseTempature, 1000);
     setInterval(raiseTempHigh, 10000);
    </script>
  </body>
</html>
