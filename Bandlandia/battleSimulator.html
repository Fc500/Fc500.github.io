<!DOCTYPE html>
<html>
  <head>
    <link href='https://fonts.googleapis.com/css?family=Antic' rel='stylesheet'>
<style>
html {
  background-color: lightgrey;
}
  
body {
    font-family: 'Antic';font-size: 10px;
}
  
.char {
  background-color: white;
  border-style: solid;
  border-width: 5px;
  border-color: black;
  position: absolute;
  margin: 5px;
  
}
 
  .charBox {
    z-index: 2;
  }  
  
  .border {
  border-style: solid;
  border-width: 3px;
  border-color: black;
  }  
  
.main {
  background-color: white;
  border-style: solid;
  border-width: 5px;
  border-color: black;
  margin-left: auto;
  margin-right: auto;
  width: 50%; 
  text-align: center;
    
}
  
  .btnMenu {
    width: 200px;
    font-size: 25px;
    padding: 3px;
    margin: 5px;
    color: white;
    text-decoration: none;
    text-align: center;
    font-weight: bold;
  }
  
  .img {
  width: 30%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  }

  
  .tooltip {
  position: relative;
  display: inline-block;
  text-align: center;
  /* border-bottom: 1px dotted black; */
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  position: absolute;
  z-index: 1;
  bottom: 100%;
  left: 50%;
  margin-left: -60px;  
  /* Fade in tooltip - takes 1 second to go from 0% to 100% opac: */
  opacity: 0;
  transition: opacity 1s;
}
 
.tooltip .tooltiptext::after {
  content: " ";
  position: absolute;
  top: 100%; /* At the bottom of the tooltip */
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: black transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}
  
  
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  overflow-y: auto;
}

li {
  float: left;
  display: block;
  padding: 15px;
}
  
</style>
  </head>
  
<body>
  
  <img src="" class="img">
  <div class="tooltip" style="width: 30%; position: absolute; top: 125px; left: 50%; transform: translate(-50%, -50%); display: none;" id="funText">TUBA KNIGHT
  <span class="tooltiptext">100 HP</span>
  </div>
  
  
  
  
  <div class="main" style="margin-top: 50px;">
    <h1 id="splashText1">Pick your team!</h1>
  </div>
  
<div class="char charBox" style="top: 3%; left: 3%;">
  <img src="" height="150" class="player">
</div>
<div class="char" style="top: 28%; left: 3%; padding-left: 1%; width: 140px;">
  <p><span class="health">Health: 10</span> <br> Energy: 10</p>
</div>

<div class="char charBox" style="top: 3%; right: 3%;">
  <img src="" height="150" class="player">
</div>
<div class="char" style="top: 28%; right: 3%; padding-left: 1%; width: 140px;">
    <p><span class="health">Health: 10</span> <br> Energy: 10</p>
</div>

<div class="char charBox" style="bottom: 11%; left: 3%;">
  <img src="" height="150" class="player">
</div>
<div class="char" style="bottom: 3%; left: 3%; padding-left: 1%; width: 140px;">
    <p><span class="health">Health: 10</span> <br> Energy: 10</p>
</div>
  
<div class="char charBox" style="bottom: 11%; right: 3%; z-index: 2;">
  <img src="" height="150" class="player">
</div>
<div class="char" style="bottom: 3%; right: 3%; padding-left: 1%; width: 140px;">
    <p><span class="health">Health: 10</span> <br> Energy: 10</p>
</div>

<div class="main" style="margin-top: 42%;">
  <!-- Attack Buttons -->
  <div id="atkButtons" style="display: none;">
    <button style="background-color: #e87361" class="border btnMenu" onclick="attackEnemy()">ATTACK</button>
    <button style="background-color: #32a852" class="border btnMenu">CHARM</button><br>
    <button style="background-color: #f5c2ff" class="border btnMenu" onclick="showItems()">ITEM</button>
    <button style="background-color: #c2d9ff" class="border btnMenu">SPARE</button>
  </div>
  
  <div id="itemMenu" style="display: none;">
    <ul>
      <li class="fs" onclick="useItem(flutesnacks)">Flute Snacks</li>
      <li class="fs" onclick="useItem(flutesnacks)">Flute Snacks</li>
      <li class="fs" onclick="useItem(flutesnacks)">Flute Snacks</li>
      <li class="fs" onclick="useItem(flutesnacks)">Flute Snacks</li>
    </ul>
  </div>
  
  <!-- Choose Character Buttons -->
  <div id="charButtons">
    <button style="background-color: #e87361" class="border btnMenu" onclick="selectCharacter('brass')">BRASS</button>
    <button style="background-color: #32a852" class="border btnMenu" onclick="selectCharacter('woodwind')">WOODWIND</button><br>
    <button style="background-color: #f5c2ff" class="border btnMenu" onclick="selectCharacter('percussion')">PERCUSSION</button>
  </div>
</div>
 

<script>
  // HTML variables
  let characterBoxes = document.getElementsByClassName("charBox");
  let specialButtons = document.getElementsByClassName("btnMenu");
  let playerHealth = document.getElementsByClassName("health");
  let players = document.getElementsByClassName("player");
  let topText = document.getElementById("splashText1");
  
  // Variables
  let woodwindGIF = "https://art.pixilart.com/ee94742f7e9a.gif";
  let brassGIF = "https://art.pixilart.com/5a0921d15d2c.gif";
  let percussionGIF = "https://art.pixilart.com/75cd9f156b7e.gif";
  let s = -1;
  let turn = 0;
  
  // Actions 
  let action1 = "";
  let action2 = "";
  let action3 = "";
  let action4 = "";
  
  // Timers
  
  let colorTimer;
  let textTimer;
  
  // Players (Instruments)
  
  let woodwind = {
    health: 100,
    attack: 10,
    energy: 35,
  };
  
  let brass = {
    health: 150,
    attack: 5,
    energy: 50,
  };
  
  let percussion = {
    health: 75,
    attack: 20,
    energy: 20,
  }; 
  
 // Players
  
 let player1 = {
    health: 0,
    attack: 0,
    energy: 0,
    hpDisp: document.getElementsByClassName("health")[0],
  };
  
  let player2 = {
    health: 0,
    attack: 0,
    energy: 0,
    hpDisp: document.getElementsByClassName("health")[1],
  };
  
  let player3 = {
    health: 0,
    attack: 0,
    energy: 0,
    hpDisp: document.getElementsByClassName("health")[2],
  };
  
  let player4 = {
    health: 0,
    attack: 0,
    energy: 0,
    hpDisp: document.getElementsByClassName("health")[3],
  };
  
  // Items
  
  let flutesnacks = {
    healthHealed: 50,
    collection: document.getElementsByClassName("fs"), 
  };
  
  // Enemies
  
  let tubaKnight = {
    health: 300,
    attack: 30,
  };
  
  window.onload = function loadingItem() {
    //characterBoxes[0].style.borderColor = "red";
    window.alert("v.0.4.1");
  }
  
  function colorChecker() {
    characterBoxes[turn].style.borderColor = "red";  
    characterBoxes[turn - 1].style.borderColor = "black";
  }
  
  function changeTopText() {
  switch(turn) {
      case 0:
        topText.innerHTML = "What will PLAYER 1 do?";
        break;
      case 1:
        topText.innerHTML = "What will PLAYER 2 do?";
        break;
      case 2:
        topText.innerHTML = "What will PLAYER 3 do?";
        break;
      case 3:
        topText.innerHTML = "What will PLAYER 4 do?";
        break;
    }
  }
 
 
  
  function actOne() {
  clearInterval(colorTimer);
  clearInterval(textTimer);
  topText.innerHTML = action1;
  window.alert("phase1");
  enemyAttack();
  setTimeout(actTwo, 5000);
  }
  
  function actTwo() {
  topText.innerHTML = action2;
  window.alert("phase2");
  enemyAttack();
  setTimeout(actThree, 5000);
  }
  
  function actThree() {
  topText.innerHTML = action3;
  window.alert("phase3");
  enemyAttack();
  setTimeout(actFour, 5000);
  }
  
  function actFour() {
  topText.innerHTML = action4;
  window.alert("phase4");
  enemyAttack();
  setTimeout(actFour, 5000);
  }
  
  function showItems() {
    document.getElementById("atkButtons").style.display = "none";
    document.getElementById("itemMenu").style.display = "block";
  }
  
  function selectCharacter(char) {
    if (s < 3) {
      s++;
      setPlayerValues(char);
      if (char == 'brass') {
        players[s].src = brassGIF;
        playerHealth[s].innerHTML = "Health: " + brass.health;
      } else if (char == 'woodwind') {
        players[s].src = woodwindGIF;
        playerHealth[s].innerHTML = "Health: " + woodwind.health;
      } else if (char == 'percussion') {
        players[s].src = percussionGIF;
        playerHealth[s].innerHTML = "Health: " + percussion.health;      
      } 
    }  
    
    if (s == 3) {
      document.getElementById("charButtons").style.display = "none";
      document.getElementById("atkButtons").style.display = "block";
      document.getElementById("funText").style.display = "block";
      colorTimer = setInterval(colorChecker, 1000);
      document.getElementsByClassName("img")[0].src = "tubaKnight.gif";
      topText.innerHTML = "The Tuba Knight storms in!";
      textTimer = setInterval(changeTopText, 1000);
    }
  }
  
  function setPlayerValues(char) {
    if (s == 0) {
      if (char == 'brass') {
        player1.health = brass.health;
        player1.attack = brass.attack;    
      } else if (char == 'percussion') {
        player1.health = percussion.health;
        player1.attack = percussion.attack;
      } else if (char == 'woodwind') {
        player1.health = woodwind.health;
        player1.attack = woodwind.attack;
      }
      
    }
    
    if (s == 1) {
      if (char == 'brass') {
        player2.health = brass.health;
        player2.attack = brass.attack;    
      } else if (char == 'percussion') {
        player2.health = percussion.health;
        player2.attack = percussion.attack;
      } else if (char == 'woodwind') {
        player2.health = woodwind.health;
        player2.attack = woodwind.attack;
      }
      
    }
    
    if (s == 2) {
      if (char == 'brass') {
        player3.health = brass.health;
        player3.attack = brass.attack;    
      } else if (char == 'percussion') {
        player3.health = percussion.health;
        player3.attack = percussion.attack;
      } else if (char == 'woodwind') {
        player3.health = woodwind.health;
        player3.attack = woodwind.attack;
      }
      
    }
    
    if (s == 3) {
      if (char == 'brass') {
        player4.health = brass.health;
        player4.attack = brass.attack;    
      } else if (char == 'percussion') {
        player4.health = percussion.health;
        player4.attack = percussion.attack;
      } else if (char == 'woodwind') {
        player4.health = woodwind.health;
        player4.attack = woodwind.attack;
      }
      
    }
  }
  
  
  function attackEnemy() {
    if (turn <= 0) {
      action1 = "PLAYER 1 did " + player1.attack + " to TUBA KNIGHT!"
      turn++;
    } else if (turn == 1) {
      action2 = "PLAYER 2 did " + player2.attack + " to TUBA KNIGHT!";
      turn++;
    } else if (turn == 2) {
      action3 = "PLAYER 3 did " + player3.attack + " to TUBA KNIGHT!";
      turn++;
    } else if (turn == 3) {
      action4 = "PLAYER 4 did " + player4.attack + " to TUBA KNIGHT!";
      turn -=3;
      characterBoxes[3].style.borderColor = "black";  
      window.alert(turn);
      actOne();
    }
  }
 /* 
  function selectItem() {
    for (let i = 0; i <= specialButtons.length; i++;) {
      specialButtons[i].style.display = "false";
    }
  } */
  
  function enemyAttack() {
  let chanceOfAttacking = Math.floor(Math.random() * 6);
  window.alert(chanceOfAttacking);
  if (chanceOfAttacking > 2) {
    let opponent = Math.floor(Math.random() * 4);
    window.alert(opponent);
    switch (opponent) {
      case 0:
        player1.health -= tubaKnight.attack;
        player1.hpDisp.innerHTML = "Health: " + player1.health;
        topText.innerHTML = "Tuba Knight did " + tubaKnight.attack + "to" + "PLAYER 1!"
        break;
      case 1:
        player2.health -= tubaKnight.attack;
        player2.hpDisp.innerHTML = "Health: " + player2.health;
        topText.innerHTML = "Tuba Knight did " + tubaKnight.attack + "to" + "PLAYER 2!"
        break;
      case 2:
       player3.health -= tubaKnight.attack;
       player3.hpDisp.innerHTML = "Health: " + player3.health;
       topText.innerHTML = "Tuba Knight did " + tubaKnight.attack + "to" + "PLAYER 3!"
       break;
      case 3:
        player4.health -= tubaKnight.attack;
        player4.hpDisp.innerHTML = "Health: " + player4.health;
        topText.innerHTML = "Tuba Knight did " + tubaKnight.attack + "to" + "PLAYER 4!"
        break;
    }
    removeInterval(changeTopText);
    setInterval(changeTopText, 1000);
  }    
}

function useItem(item) {
  switch(turn) {
    case 0:
      player1.health += item.healthHealed;
      player1.hpDisp.innerHTML = "Health: " + player1.health;
      break;
    case 1:
      player2.health += item.healthHealed;
      player2.hpDisp.innerHTML = "Health: " + player2.health;
      break;
    case 2:
      player3.health += item.healthHealed;
      player3.hpDisp.innerHTML = "Health: " + player3.health;
      break;
    case 3:
      player4.health += item.healthHealed;
      player4.hpDisp.innerHTML = "Health: " + player4.health;
      break;
  }
  turn++;
  flutesnacks.collection[0].remove();
  document.getElementById("atkButtons").style.display = "block";
  document.getElementById("itemMenu").style.display = "none";
}
  
</script>  
  </body>
</html>
